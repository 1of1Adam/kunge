---
title: "程序化交易"
pageTitle: "05：程序化交易"
description: "Program Trading"
---

## 程序化交易的基础概念

### 定义与运作机制
程序化交易是指机构使用编写好的电脑程序（算法）进行自动化交易。
- **持续性**：即使在看似平静的窄幅震荡区间中，算法仍在不断地买入和卖出，因为市场时刻存在赚钱的机会。
- **无完美入场**：图表上的每一根K线都有巨大的成交量，这意味着每一分每一秒，机构都能同时找到买入和卖出的理由。

### 市场的博弈
市场是由无数机构的算法博弈形成的：
- **看跌程序**：试图制造向下突破。
- **看涨程序**：试图制造向上突破。
- **结果**：最终一方获胜，另一方止损离场，推动趋势形成。

## 套利交易 (Arbitrage)

### 关联品种的同步性
某些品种的价格走势高度相关，例如 **SPY**（标普500 ETF）和 **ES**（标普500 E-mini 期货）。
- 它们的K线图几乎完全一致。
- 这种一致性是由套利机构维护的。

### 套利机制
机构使用算法实时监控相关品种（如股票组合 vs 指数期货）：

| 现象 | 操作 | 结果 |
|:---|:---|:---|
| **价格偏差** | 发现一个品种价格偏高，另一个偏低 | 捕捉微小差价 |
| **对冲操作** | 卖空价格偏高的，做多价格偏低的 | 迫使两者价格重新回归一致 |
| **成交量占比** | 估计约 **30%** 的日成交量来自套利交易 | 市场稳定在公允价值附近 |

## 价格行为与机构足迹

### 跟随机构交易
虽然大部分成交量由机器完成，但它们形成了可见的价格行为（Price Action）。交易者可以通过阅读K线搭上机构的顺风车。

**案例分析：突破与失望**
1. **强劲突破**：连续大阳线，程序大量买入。
2. **追涨**：交易者在收盘买入，若回调则加仓。
3. **失望 (Disappointment)**：随后出现大阴线，多头感到失望。
4. **放弃 (Give Up)**：当价格回到盈亏平衡点时，失望的多头选择离场，导致市场无法继续上涨。
5. **反转**：空头察觉多头放弃，加大做空力度，导致市场向下突破。

### 个人交易者的局限性

> **核心现实**：你无法影响市场。

- **资金量**：无论你交易1手还是100手，相对于市场海量的机构订单，你的影响力为零。
- **成交逻辑**：
    - 你能卖出，是因为有机构愿意买入。
    - 你能买入，是因为有机构愿意卖出。
    - 你的止损被触发，是因为机构也希望价格到达那里。

### 突破单 (Stop Entry) 的本质
如果你在某根K线高点上方挂突破买单并成交，这并不是因为你的订单在那里，而是因为**其他机构也想在同样的价格买入**，从而推动价格触及你的订单。

## 非法交易行为与误区

虽然历史上存在作弊行为，但在受监管的美国主流市场（股票、期货、外汇），这些行为大多是非法的，且对散户影响甚微。

### 谎骗交易 (Spoofing)
**定义**：挂出巨大的虚假订单以欺骗其他算法，随后在成交前撤单。

**操作实例**：
1. **设局**：机构想买入，但在上方挂出巨额卖单（假单）。
2. **诱导**：其他算法侦测到巨大卖压，跟风做空，导致价格下跌。
3. **收割**：骗子机构撤销卖单，在低位以折扣价买入（接盘跟风者的卖单）。
4. **反转**：骗子机构买入后推动价格上涨获利，跟风做空者被迫止损。

### 抢跑交易 (Front Running)
**定义**：券商或高频商在客户订单成交前，利用速度优势先一步买入，再以稍高价格卖给客户。
- **现状**：这是非法的。
- **影响**：虽然每笔交易可能只损失1-2分钱，但对机构而言累积利润巨大。

## 高频交易 (High Frequency Trading, HFT)

### HFT 的特征
- **极高频次**：每天可能进行数百万笔交易。
- **极小仓位**：每笔交易可能仅 100-300 股或几手合约。
- **极短持有**：持仓时间极短，赚取微薄利润（Ticks）。
- **基础设施**：租用紧邻交易所的机房（Co-location），使用最快的计算机，争取毫秒级的速度优势。

### 2010年闪崩 (Flash Crash) 数据揭秘

| 参与者 | 成交量占比 | 交易特征 |
|:---|:---:|:---|
| **15家 HFT 机构** | **34%** | 平均每笔仅 **6手** 合约，日均3.2万笔交易 |
| **散户** | **< 2%** | 平均每笔 **1手** 合约，日均1笔交易 |

### 盈利模式
HFT 不需要极高的胜率，类似于赌场庄家：
- **胜率**：约 **55%** 即可。
- **数学期望**：
    - 假设 1000万笔交易，55% 盈利，45% 亏损。
    - 净胜 100万笔交易，每笔赚 1美元。
    - 日盈利可达 100万美元，年盈利数亿。

## 交易心态与现实

### 市场不是针对你
- 散户资金占市场总量不足 **5%**。
- 机构主要通过收割其他机构获利，他们不在乎散户那点微不足道的资金。
- 不要将亏损归咎于"机构操纵"或"高频交易"。

### 成功的真相
- **无关性**：HFT 和非法操纵对普通交易者（分钟/小时级别）几乎没有影响。
- **硬道理**：赚钱的唯一途径是刻苦学习。
    - 拒绝"快速致富"的诱惑（如一周速成班）。
    - 需要投入数千小时学习、做笔记、复盘。

## 重要概念与关键点

| 概念 | 说明 |
|:---|:---|
| **价格即共识** | 任何价格的成交都意味着有机构愿意在该价位买入和卖出。 |
| **99% 规则** | 99% 的时间里，散户无法影响市场。你的订单成交完全依赖于机构的意愿。 |
| **套利 (Arbitrage)** | 关联品种（如 SPY/ES）之间的微小价差是机构的重要利润来源，这也保证了市场价格的有效性。 |
| **放弃K线 (Give Up Bar)** | 趋势反转往往发生在一方（如多头）彻底失望并平仓离场之后，这通常表现为强烈的反向K线。 |
| **HFT 误区** | 高频交易依靠的是速度和极高的交易频次累积微利，并非通过"偷窃"散户资金致富。 |

## 总结

本节课详细揭示了市场的微观结构和参与者构成：

1.  **程序化主导**：市场绝大部分交易量由算法和程序完成，包括套利和高频交易。
2.  **散户地位**：个人交易者在市场中微不足道，无法撼动价格。我们能做的唯一事情是识别机构留下的价格行为足迹，并跟随他们。
3.  **破除阴谋论**：虽然存在谎骗和抢跑等非法行为，但它们不是散户亏损的根本原因。机构之间的博弈才是市场的主旋律。
4.  **盈利逻辑**：高频交易靠的是概率优势（55%胜率）和海量频次。对于普通交易者，成功的关键在于长时间的学习和对价格行为的深刻理解，而非寻找借口。