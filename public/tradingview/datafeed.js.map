{
  "version": 3,
  "sources": ["../src/datafeed/datafeed-utils.js", "../src/datafeed/realtime-client.js", "../src/datafeed/udf-http-client.js", "../src/datafeed/tradingview-datafeed.js", "../src/datafeed/index.js"],
  "sourcesContent": ["/**\n * @param {unknown} value\n * @returns {number}\n */\nfunction safeNumber(value) {\n  const num = Number(value);\n  return Number.isFinite(num) ? num : 0;\n}\n\n/**\n * @param {number} a\n * @param {number} b\n * @param {number} [epsilon]\n * @returns {boolean}\n */\nfunction floatEquals(a, b, epsilon = 1e-9) {\n  return Math.abs(a - b) < epsilon;\n}\n\n/**\n * @param {unknown} entry\n * @returns {string}\n */\nfunction normalizeQuoteEntry(entry) {\n  if (typeof entry === 'string') {\n    return entry.trim();\n  }\n  if (entry && typeof entry === 'object') {\n    if (typeof entry.symbol === 'string') return entry.symbol.trim();\n    if (typeof entry.ticker === 'string') return entry.ticker.trim();\n  }\n  return '';\n}\n\n/**\n * @param {unknown} list\n * @returns {string[]}\n */\nfunction normalizeQuoteList(list) {\n  if (!Array.isArray(list)) return [];\n  const normalized = list\n    .map((entry) => normalizeQuoteEntry(entry))\n    .filter((symbol) => symbol.length);\n  return Array.from(new Set(normalized));\n}\n\nexport {\n  floatEquals,\n  normalizeQuoteEntry,\n  normalizeQuoteList,\n  safeNumber,\n};\n", "import { floatEquals, normalizeQuoteList, safeNumber } from './datafeed-utils.js';\n\nconst REALTIME_PATH = '/ws/realtime';\nconst REALTIME_RECONNECT_BASE_DELAY_MS = 1000;\nconst REALTIME_RECONNECT_MAX_DELAY_MS = 30000;\nconst REALTIME_RECONNECT_BACKOFF_FACTOR = 1.5;\nconst MAX_RECONNECT_ATTEMPTS = 15;\nconst HEARTBEAT_INTERVAL_MS = 20000;\nconst CLIENT_PONG_TIMEOUT_MS = HEARTBEAT_INTERVAL_MS * 2;\nconst MAX_WS_QUEUE_SIZE = 500;\nconst MAX_LAST_BARS_CACHE_SIZE = 100;\n\nconst MESSAGE_PRIORITY = Object.freeze({\n  subscribe: 3,\n  subscribe_quotes: 3,\n  unsubscribe: 2,\n  unsubscribe_quotes: 2,\n  ping: 1,\n  default: 2,\n});\n\nconst SUBSCRIPTION_MESSAGE_TYPES = new Set([\n  'subscribe',\n  'unsubscribe',\n  'subscribe_quotes',\n  'unsubscribe_quotes',\n]);\n\nconst ConnectionState = {\n  DISCONNECTED: 'disconnected',\n  CONNECTING: 'connecting',\n  CONNECTED: 'connected',\n  RECONNECTING: 'reconnecting',\n  ERROR: 'error',\n  DEGRADED: 'degraded',\n};\n\n/**\n * @param {string} httpUrl\n * @returns {string}\n */\nfunction buildRealtimeUrl(httpUrl) {\n  const normalized = httpUrl.replace(/\\/$/, '');\n  if (/^https:/i.test(normalized)) {\n    return normalized.replace(/^https:/i, 'wss:') + REALTIME_PATH;\n  }\n  if (/^http:/i.test(normalized)) {\n    return normalized.replace(/^http:/i, 'ws:') + REALTIME_PATH;\n  }\n  return `ws://${normalized}${REALTIME_PATH}`;\n}\n\n/**\n * @param {Record<string, unknown>} [barPayload]\n * @returns {{ time: number, open: number, high: number, low: number, close: number, volume: number }}\n */\nfunction formatRealtimeBar(barPayload = {}) {\n  const bar = {\n    time: safeNumber(barPayload.time),\n    open: safeNumber(barPayload.open),\n    high: safeNumber(barPayload.high),\n    low: safeNumber(barPayload.low),\n    close: safeNumber(barPayload.close),\n    volume: Math.max(0, safeNumber(barPayload.volume)),\n  };\n\n  if (bar.high < bar.low) {\n    [bar.high, bar.low] = [bar.low, bar.high];\n  }\n  bar.open = Math.max(bar.low, Math.min(bar.open, bar.high));\n  bar.close = Math.max(bar.low, Math.min(bar.close, bar.high));\n\n  return bar;\n}\n\nclass RealtimeClient {\n  constructor({ baseUrl, logPrefix = '[RealtimeClient]', fetchQuotes }) {\n    this.baseUrl = (baseUrl || '').replace(/\\/$/, '');\n    this._logPrefix = logPrefix;\n    this._fetchQuotes = typeof fetchQuotes === 'function' ? fetchQuotes : null;\n\n    this.realtimeSubscriptions = new Map();\n    this.quoteSubscriptions = new Map();\n    this.lastBarsCache = new Map();\n\n    this._ws = null;\n    this._wsReady = false;\n    this._wsQueue = [];\n    this._wsReconnectTimer = null;\n    this._heartbeatTimer = null;\n    this._wsClosingIntentionally = false;\n    this._wsReconnectAttempts = 0;\n    this._lastPongAt = Date.now();\n    this._lastPingSentAt = null;\n    this._lastPingRttMs = null;\n    this._lastConnectionReset = null;\n    this._lastSubscriptionReset = null;\n    this._authTokenExpMs = null;\n    this._authTokenRefreshFailures = 0;\n    this._authTokenMaxFailures = null;\n    this._awaitingAdapterRecovery = false;\n    this._resubscribeInProgress = false;\n    this._syncedRealtimeSubscriptions = new Map();\n    this._syncedQuoteSubscriptions = new Map();\n    this._hasConnectedOnce = false;\n    this._pendingFullReset = false;\n    this._pendingFullResetReason = null;\n    this._quoteSubscribePending = new Set();\n    this._connectionState = ConnectionState.DISCONNECTED;\n    this._connectionStateListeners = new Set();\n    this._fullResetListeners = new Set();\n    this._isOffline = typeof navigator !== 'undefined' && navigator.onLine === false;\n    this._broker = null;\n    this._onSystemWarning = null;\n  }\n\n  get connectionState() {\n    return this._connectionState;\n  }\n\n  get isOffline() {\n    return this._isOffline;\n  }\n\n  onConnectionStateChange(listener) {\n    this._connectionStateListeners.add(listener);\n    return () => this._connectionStateListeners.delete(listener);\n  }\n\n  onFullReset(listener) {\n    this._fullResetListeners.add(listener);\n    return () => this._fullResetListeners.delete(listener);\n  }\n\n  setBroker(broker) {\n    this._broker = broker;\n  }\n\n  setSystemWarningHandler(handler) {\n    this._onSystemWarning = handler;\n  }\n\n  handleOffline() {\n    if (this._isOffline) return;\n    this._isOffline = true;\n    this._setConnectionState(ConnectionState.DISCONNECTED, { reason: 'offline' });\n\n    this._stopHeartbeat();\n    if (this._wsReconnectTimer) {\n      clearTimeout(this._wsReconnectTimer);\n      this._wsReconnectTimer = null;\n    }\n\n    if (this._ws && (this._ws.readyState === WebSocket.OPEN || this._ws.readyState === WebSocket.CONNECTING)) {\n      try {\n        this._wsClosingIntentionally = true;\n        this._ws.close();\n      } catch (error) {\n        console.warn(this._logPrefix, 'Offline close socket failed', error);\n      }\n    }\n    this._ws = null;\n    this._wsReady = false;\n  }\n\n  handleOnline() {\n    if (!this._isOffline) return;\n    this._isOffline = false;\n\n    this._pendingFullReset = true;\n    this._pendingFullResetReason = 'network_online';\n    this._wsReconnectAttempts = 0;\n    if (this._wsReconnectTimer) {\n      clearTimeout(this._wsReconnectTimer);\n      this._wsReconnectTimer = null;\n    }\n\n    if (this.realtimeSubscriptions.size || this.quoteSubscriptions.size) {\n      this._forceRealtimeReconnect('network_online');\n    }\n  }\n\n  resetCache() {\n    const previousSize = this.lastBarsCache.size;\n    this.lastBarsCache.clear();\n    this._quoteSubscribePending.clear();\n    if (previousSize > 0) {\n      console.info(this._logPrefix, `resetCache cleared ${previousSize} cached bars`);\n    }\n  }\n\n  getCacheKey(symbolInfo, resolution) {\n    const symbol = typeof symbolInfo === 'string' ? symbolInfo : (symbolInfo?.ticker || symbolInfo?.name || '');\n    return `${symbol}__${resolution || ''}`;\n  }\n\n  setLastBarCache(key, bar) {\n    if (!this.lastBarsCache.has(key) && this.lastBarsCache.size >= MAX_LAST_BARS_CACHE_SIZE) {\n      const oldestKey = this.lastBarsCache.keys().next().value;\n      this.lastBarsCache.delete(oldestKey);\n      console.debug(this._logPrefix, 'lastBarsCache evicted oldest entry:', oldestKey);\n    }\n    this.lastBarsCache.set(key, bar);\n  }\n\n  getLastBarCache(key) {\n    return this.lastBarsCache.get(key);\n  }\n\n  deleteLastBarCache(key) {\n    this.lastBarsCache.delete(key);\n  }\n\n  subscribeBars(symbolInfo, resolution, onRealtimeCallback, subscriberUID, onResetCacheNeededCallback) {\n    if (!symbolInfo) {\n      console.error(this._logPrefix, 'subscribeBars missing symbolInfo');\n      return;\n    }\n    if (!subscriberUID) {\n      console.error(this._logPrefix, 'subscribeBars missing subscriberUID');\n      return;\n    }\n\n    const symbol = symbolInfo.ticker || symbolInfo.name;\n    const session = symbolInfo.subsession_id;\n    console.info(this._logPrefix, 'subscribeBars', { symbol, resolution, subscriberUID });\n\n    const existing = this.realtimeSubscriptions.get(subscriberUID);\n    if (existing) {\n      const oldSession = existing?.session;\n      const newSession = session;\n      if (oldSession && newSession && oldSession !== newSession && typeof onResetCacheNeededCallback === 'function') {\n        onResetCacheNeededCallback();\n      }\n    }\n\n    this.realtimeSubscriptions.set(subscriberUID, {\n      symbol,\n      resolution,\n      session,\n      subscriberUID,\n      onRealtimeCallback,\n      onResetCacheNeededCallback,\n    });\n\n    this._syncedRealtimeSubscriptions.delete(subscriberUID);\n    this._sendRealtimeMessage({\n      type: 'subscribe',\n      symbol,\n      resolution,\n      session,\n      subscriberUID,\n    });\n\n    this._ensureRealtimeSocket();\n  }\n\n  unsubscribeBars(subscriberUID) {\n    console.info(this._logPrefix, 'unsubscribeBars', subscriberUID);\n    const subscription = this.realtimeSubscriptions.get(subscriberUID);\n    if (!subscription) return;\n\n    const cacheKey = this.getCacheKey(subscription.symbol, subscription.resolution);\n    if (cacheKey) {\n      this.lastBarsCache.delete(cacheKey);\n    }\n\n    this.realtimeSubscriptions.delete(subscriberUID);\n    this._syncedRealtimeSubscriptions.delete(subscriberUID);\n    this._sendRealtimeMessage({ type: 'unsubscribe', subscriberUID });\n\n    if (!this._resubscribeInProgress && !this.realtimeSubscriptions.size && !this.quoteSubscriptions.size) {\n      this._cleanupSocket();\n    }\n  }\n\n  subscribeQuotes(symbols, fastSymbols, onRealtimeCallback, listenerGUID) {\n    const guid = typeof listenerGUID === 'string' ? listenerGUID.trim() : '';\n    if (!guid) {\n      console.error(this._logPrefix, 'subscribeQuotes missing listenerGUID');\n      return;\n    }\n\n    const normalizedSymbols = normalizeQuoteList(symbols);\n    const normalizedFastSymbols = normalizeQuoteList(fastSymbols);\n\n    if (this._quoteSubscribePending.has(guid)) {\n      console.debug(this._logPrefix, 'subscribeQuotes: request pending for GUID, updating callback only:', guid);\n      const existing = this.quoteSubscriptions.get(guid);\n      if (existing) {\n        existing.callback = onRealtimeCallback;\n        existing.symbols = new Set(normalizedSymbols);\n        existing.fastSymbols = new Set(normalizedFastSymbols);\n      }\n      return;\n    }\n\n    const existing = this.quoteSubscriptions.get(guid);\n    if (existing) {\n      const sameSymbols = this._getQuoteSubscriptionSignature({\n        symbols: normalizedSymbols,\n        fastSymbols: normalizedFastSymbols,\n      }) === this._getQuoteSubscriptionSignature(existing);\n      if (sameSymbols) {\n        console.debug(this._logPrefix, 'subscribeQuotes: same subscription already exists for GUID:', guid);\n        existing.callback = onRealtimeCallback;\n        return;\n      }\n      console.info(this._logPrefix, 'subscribeQuotes: updating existing subscription for GUID:', guid);\n      this._sendRealtimeMessage({ type: 'unsubscribe_quotes', listenerGUID: guid });\n    }\n\n    this._quoteSubscribePending.add(guid);\n\n    this.quoteSubscriptions.set(guid, {\n      listenerGUID: guid,\n      symbols: new Set(normalizedSymbols),\n      fastSymbols: new Set(normalizedFastSymbols),\n      callback: onRealtimeCallback,\n    });\n\n    const initialSymbols = Array.from(new Set([...normalizedSymbols, ...normalizedFastSymbols]));\n    if (initialSymbols.length && typeof this._fetchQuotes === 'function') {\n      this._fetchQuotes(initialSymbols, (quotes) => {\n        try {\n          onRealtimeCallback(quotes);\n        } catch (error) {\n          console.warn(this._logPrefix, 'initial quote callback failed', error);\n        }\n      }, (error) => {\n        console.warn(this._logPrefix, 'initial getQuotes failed before subscribeQuotes', error);\n      });\n    }\n\n    this._syncedQuoteSubscriptions.delete(guid);\n    this._sendRealtimeMessage({\n      type: 'subscribe_quotes',\n      listenerGUID: guid,\n      symbols: normalizedSymbols,\n      fastSymbols: normalizedFastSymbols,\n    });\n\n    this._ensureRealtimeSocket();\n  }\n\n  unsubscribeQuotes(listenerGUID) {\n    const guid = typeof listenerGUID === 'string' ? listenerGUID.trim() : '';\n    if (!guid) return;\n    this.quoteSubscriptions.delete(guid);\n    this._quoteSubscribePending.delete(guid);\n    this._syncedQuoteSubscriptions.delete(guid);\n    this._sendRealtimeMessage({ type: 'unsubscribe_quotes', listenerGUID: guid });\n\n    if (this.quoteSubscriptions.size === 0 && this.realtimeSubscriptions.size === 0) {\n      this._cleanupSocket();\n    }\n  }\n\n  _setConnectionState(newState, context = {}) {\n    if (this._connectionState === newState) return;\n    const oldState = this._connectionState;\n    this._connectionState = newState;\n\n    const logContext = {\n      transition: `${oldState} -> ${newState}`,\n      reconnectAttempts: this._wsReconnectAttempts,\n      subscriptions: {\n        realtime: this.realtimeSubscriptions.size,\n        quote: this.quoteSubscriptions.size,\n      },\n      ...context,\n    };\n    console.info(this._logPrefix, 'Connection state changed:', logContext);\n    this._logDebugSnapshot('connection_state', {\n      transition: `${oldState} -> ${newState}`,\n    });\n\n    this._connectionStateListeners.forEach(listener => {\n      try {\n        listener(newState, oldState);\n      } catch (error) {\n        console.error(this._logPrefix, 'Connection state listener error:', error);\n      }\n    });\n  }\n\n  _getWsState() {\n    if (!this._ws) return 'closed';\n    switch (this._ws.readyState) {\n      case WebSocket.CONNECTING:\n        return 'connecting';\n      case WebSocket.OPEN:\n        return 'open';\n      default:\n        return 'closed';\n    }\n  }\n\n  _formatIso(ts) {\n    return typeof ts === 'number' && Number.isFinite(ts) ? new Date(ts).toISOString() : null;\n  }\n\n  _buildDebugSnapshot(extra = {}) {\n    const lastConnectionReset = this._lastConnectionReset\n      ? { ...this._lastConnectionReset, atIso: this._formatIso(this._lastConnectionReset.at) }\n      : null;\n    const lastSubscriptionReset = this._lastSubscriptionReset\n      ? { ...this._lastSubscriptionReset, atIso: this._formatIso(this._lastSubscriptionReset.at) }\n      : null;\n    const authTokenRemainingMs = typeof this._authTokenExpMs === 'number'\n      ? this._authTokenExpMs - Date.now()\n      : null;\n    const authTokenRemainingMinutes = typeof authTokenRemainingMs === 'number'\n      ? Math.max(0, Math.ceil(authTokenRemainingMs / 60000))\n      : null;\n\n    return {\n      wsState: this._getWsState(),\n      connectionState: this._connectionState,\n      lastPongAt: this._lastPongAt,\n      lastPongAtIso: this._formatIso(this._lastPongAt),\n      pingRttMs: this._lastPingRttMs,\n      subscriptions: {\n        bars: this.realtimeSubscriptions.size,\n        quotes: this.quoteSubscriptions.size,\n      },\n      authToken: {\n        expMs: this._authTokenExpMs,\n        expIso: this._formatIso(this._authTokenExpMs),\n        remainingMs: authTokenRemainingMs,\n        remainingMinutes: authTokenRemainingMinutes,\n        refreshFailures: this._authTokenRefreshFailures,\n        maxFailures: this._authTokenMaxFailures,\n      },\n      lastConnectionReset,\n      lastSubscriptionReset,\n      ...extra,\n    };\n  }\n\n  _logDebugSnapshot(event, extra = {}, level = 'debug') {\n    const logger = console[level] || console.debug;\n    logger(this._logPrefix, 'DebugState', {\n      event,\n      timestamp: Date.now(),\n      ...this._buildDebugSnapshot(extra),\n    });\n  }\n\n  _notifyFullReset(info = {}) {\n    this._fullResetListeners.forEach(listener => {\n      try {\n        listener(info);\n      } catch (error) {\n        console.error(this._logPrefix, 'Full reset listener error:', error);\n      }\n    });\n  }\n\n  _clearSyncedState() {\n    this._syncedRealtimeSubscriptions.clear();\n    this._syncedQuoteSubscriptions.clear();\n  }\n\n  _getRealtimeSubscriptionSignature(source) {\n    const symbol = source?.symbol || '';\n    const resolution = source?.resolution || '';\n    const session = source?.session || '';\n    return `${symbol}__${resolution}__${session}`;\n  }\n\n  _getQuoteSubscriptionSignature(source) {\n    const symbols = Array.isArray(source?.symbols)\n      ? source.symbols\n      : Array.from(source?.symbols || []);\n    const fastSymbols = Array.isArray(source?.fastSymbols)\n      ? source.fastSymbols\n      : Array.from(source?.fastSymbols || []);\n    const normalizedSymbols = Array.from(new Set(symbols.filter(Boolean))).sort();\n    const normalizedFastSymbols = Array.from(new Set(fastSymbols.filter(Boolean))).sort();\n    return `${normalizedSymbols.join(',')}__${normalizedFastSymbols.join(',')}`;\n  }\n\n  _trackSyncedSubscription(message) {\n    switch (message?.type) {\n      case 'subscribe': {\n        const subscriberUID = message?.subscriberUID;\n        if (!subscriberUID) return;\n        const signature = this._getRealtimeSubscriptionSignature(message);\n        this._syncedRealtimeSubscriptions.set(subscriberUID, signature);\n        break;\n      }\n      case 'unsubscribe': {\n        const subscriberUID = message?.subscriberUID;\n        if (!subscriberUID) return;\n        this._syncedRealtimeSubscriptions.delete(subscriberUID);\n        break;\n      }\n      case 'subscribe_quotes': {\n        const listenerGUID = message?.listenerGUID;\n        if (!listenerGUID) return;\n        const signature = this._getQuoteSubscriptionSignature(message);\n        this._syncedQuoteSubscriptions.set(listenerGUID, signature);\n        break;\n      }\n      case 'unsubscribe_quotes': {\n        const listenerGUID = message?.listenerGUID;\n        if (!listenerGUID) return;\n        this._syncedQuoteSubscriptions.delete(listenerGUID);\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  _ensureRealtimeSocket() {\n    if (this._ws && (this._ws.readyState === WebSocket.OPEN || this._ws.readyState === WebSocket.CONNECTING)) {\n      return;\n    }\n\n    if (!this.realtimeSubscriptions.size && !this.quoteSubscriptions.size) return;\n    if (this._isOffline || (typeof navigator !== 'undefined' && navigator.onLine === false)) return;\n\n    const url = buildRealtimeUrl(this.baseUrl);\n    this._ws = new WebSocket(url);\n    this._wsReady = false;\n\n    this._setConnectionState(\n      this._wsReconnectAttempts > 0 ? ConnectionState.RECONNECTING : ConnectionState.CONNECTING,\n      { wsUrl: url, reason: 'initiating_connection' }\n    );\n\n    this._ws.onopen = () => {\n      console.info(this._logPrefix, 'Realtime socket connected');\n      this._wsReady = true;\n      this._lastPongAt = Date.now();\n      this._awaitingAdapterRecovery = false;\n      const prevAttempts = this._wsReconnectAttempts;\n      this._wsReconnectAttempts = 0;\n      this._setConnectionState(ConnectionState.CONNECTED, {\n        reason: 'socket_opened',\n        prevReconnectAttempts: prevAttempts,\n      });\n      this._flushRealtimeQueue();\n      const fullReset = this._pendingFullReset || this._hasConnectedOnce;\n      const resetReason = fullReset\n        ? (this._pendingFullResetReason || (this._hasConnectedOnce ? 'reconnect' : 'initial_connect'))\n        : null;\n      this._pendingFullReset = false;\n      this._pendingFullResetReason = null;\n      this._hasConnectedOnce = true;\n      this._resubscribeAll({ fullReset, reason: resetReason });\n      this._startHeartbeat();\n    };\n\n    this._ws.onmessage = (event) => this._handleRealtimeMessage(event);\n\n    this._ws.onclose = () => {\n      if (this._wsClosingIntentionally) {\n        console.debug(this._logPrefix, 'Realtime socket closed (intentional)');\n        this._setConnectionState(ConnectionState.DISCONNECTED, {\n          reason: 'intentional_close',\n        });\n      } else {\n        console.warn(this._logPrefix, 'Realtime socket closed unexpectedly');\n        this._setConnectionState(ConnectionState.RECONNECTING, {\n          reason: 'unexpected_close',\n        });\n      }\n      this._wsReady = false;\n      this._wsClosingIntentionally = false;\n      this._stopHeartbeat();\n      this._ws = null;\n      this._clearSyncedState();\n      this._scheduleReconnect();\n    };\n\n    this._ws.onerror = (error) => {\n      console.error(this._logPrefix, 'Realtime socket error:', error);\n      this._setConnectionState(ConnectionState.ERROR, {\n        reason: 'socket_error',\n        errorType: error?.type || 'unknown',\n      });\n    };\n  }\n\n  _handleRealtimeMessage(event) {\n    let payload;\n    try {\n      payload = JSON.parse(event.data);\n    } catch (error) {\n      console.error(this._logPrefix, 'Invalid realtime payload', error);\n      return;\n    }\n\n    switch (payload?.type) {\n      case 'bar':\n        this._handleIncomingBar(payload);\n        break;\n      case 'quote':\n        this._handleIncomingQuote(payload);\n        break;\n      case 'error':\n        console.error(this._logPrefix, 'Realtime error', payload);\n        if (payload.listenerGUID) {\n          this._quoteSubscribePending.delete(payload.listenerGUID);\n        }\n        if (payload.code === 'quote_subscribe_in_progress' && payload.listenerGUID) {\n          const retryDelay = 500;\n          console.info(this._logPrefix, `Will retry quote subscription for ${payload.listenerGUID} in ${retryDelay}ms`);\n          setTimeout(() => {\n            const sub = this.quoteSubscriptions.get(payload.listenerGUID);\n            if (sub) {\n              console.info(this._logPrefix, `Retrying quote subscription for ${payload.listenerGUID}`);\n              this._quoteSubscribePending.add(payload.listenerGUID);\n              this._sendRealtimeMessage({\n                type: 'subscribe_quotes',\n                listenerGUID: payload.listenerGUID,\n                symbols: Array.from(sub.symbols),\n                fastSymbols: Array.from(sub.fastSymbols),\n              });\n            }\n          }, retryDelay);\n        }\n        break;\n      case 'subscribed':\n        console.debug(this._logPrefix, 'Realtime subscribed', payload.subscriberUID);\n        break;\n      case 'quote_subscribed':\n        console.debug(this._logPrefix, 'Realtime quotes subscribed', payload.listenerGUID);\n        if (payload.listenerGUID) {\n          this._quoteSubscribePending.delete(payload.listenerGUID);\n        }\n        break;\n      case 'adapter_status':\n        this._handleAdapterStatus(payload);\n        break;\n      case 'connection_status':\n        this._handleConnectionStatus(payload);\n        break;\n      case 'connection_reset':\n        this._handleConnectionReset(payload);\n        break;\n      case 'subscription_reset':\n        this._handleSubscriptionReset(payload);\n        break;\n      case 'system_warning':\n        this._handleSystemWarning(payload);\n        break;\n      case 'system_info':\n        console.info(this._logPrefix, 'System info:', payload.message, payload);\n        break;\n      case 'pong':\n        this._handlePong();\n        break;\n      case 'hello':\n        break;\n      default:\n        console.debug(this._logPrefix, 'Realtime event', payload);\n    }\n  }\n\n  _handleAdapterStatus(payload) {\n    const status = payload?.status;\n    if (!status) return;\n\n    const expMs = Number(payload?.authTokenExpMs);\n    if (Number.isFinite(expMs)) {\n      this._authTokenExpMs = expMs;\n    }\n    if (Number.isFinite(payload?.authTokenRefreshFailures)) {\n      this._authTokenRefreshFailures = payload.authTokenRefreshFailures;\n    }\n    if (Number.isFinite(payload?.authTokenMaxFailures)) {\n      this._authTokenMaxFailures = payload.authTokenMaxFailures;\n    } else if (Number.isFinite(payload?.maxFailures)) {\n      this._authTokenMaxFailures = payload.maxFailures;\n    }\n    const authTokenRemainingMs = typeof this._authTokenExpMs === 'number'\n      ? this._authTokenExpMs - Date.now()\n      : null;\n    const authTokenRemainingMinutes = typeof authTokenRemainingMs === 'number'\n      ? Math.max(0, Math.ceil(authTokenRemainingMs / 60000))\n      : null;\n\n    console.warn(this._logPrefix, 'Adapter status update:', status);\n    this._logDebugSnapshot('adapter_status', {\n      adapterStatus: status,\n      reason: payload?.reason,\n      suppressHandling: payload?.suppressHandling === true,\n      authTokenRemainingMinutes,\n    });\n    if (status === 'error' && payload?.reason === 'auth_token_refresh_failed') {\n      console.error(this._logPrefix, 'auth_token refresh failed threshold reached', {\n        failures: payload?.authTokenRefreshFailures,\n        maxFailures: payload?.authTokenMaxFailures ?? payload?.maxFailures,\n      });\n    }\n\n    if (payload?.suppressHandling === true && status !== 'error') {\n      if (status === 'connected') {\n        this._awaitingAdapterRecovery = false;\n        this._setConnectionState(ConnectionState.CONNECTED, {\n          reason: payload?.reason || 'adapter_status',\n        });\n      }\n      return;\n    }\n\n    if (status === 'disconnected' || status === 'error') {\n      this._awaitingAdapterRecovery = true;\n      this._setConnectionState(ConnectionState.DEGRADED, {\n        reason: 'adapter_status',\n        adapterStatus: status,\n      });\n      return;\n    }\n\n    if (status === 'connecting') {\n      this._setConnectionState(ConnectionState.RECONNECTING, {\n        reason: 'adapter_status',\n        adapterStatus: status,\n      });\n      return;\n    }\n\n    if (status === 'connected') {\n      const shouldResubscribe = this._awaitingAdapterRecovery || payload?.reset;\n      this._awaitingAdapterRecovery = false;\n      this._setConnectionState(ConnectionState.CONNECTED, {\n        reason: 'adapter_recovered',\n      });\n\n      if (shouldResubscribe) {\n        console.info(this._logPrefix, 'Adapter recovered, resubscribing all data');\n        this._resubscribeAll({ fullReset: true, reason: 'adapter_recovered' });\n      }\n    }\n  }\n\n  _handleConnectionStatus(payload) {\n    const status = payload?.status;\n    if (!status) return;\n\n    if (status === 'upstream_disconnected') {\n      this._awaitingAdapterRecovery = true;\n      this._setConnectionState(ConnectionState.DEGRADED, {\n        reason: 'upstream_disconnected',\n      });\n      return;\n    }\n\n    if (status === 'reconnecting') {\n      this._setConnectionState(ConnectionState.RECONNECTING, {\n        reason: 'upstream_reconnecting',\n      });\n    }\n  }\n\n  _handleConnectionReset(payload) {\n    if (this._resubscribeInProgress) return;\n    const reason = payload?.reason || 'connection_reset';\n    this._lastConnectionReset = {\n      reason,\n      at: Date.now(),\n    };\n    console.warn(this._logPrefix, 'Server connection reset:', reason);\n    this._logDebugSnapshot('connection_reset', { reason }, 'info');\n    this._resubscribeAll({ fullReset: true, reason });\n  }\n\n  _handleSubscriptionReset(payload) {\n    const reason = payload?.reason || 'subscription_reset';\n    this._lastSubscriptionReset = {\n      reason,\n      at: Date.now(),\n      subscriberUID: payload?.subscriberUID,\n      symbol: payload?.symbol,\n      resolution: payload?.resolution,\n    };\n    console.warn(this._logPrefix, 'Subscription reset:', reason, payload);\n    this._logDebugSnapshot('subscription_reset', {\n      reason,\n      subscriberUID: payload?.subscriberUID,\n      symbol: payload?.symbol,\n      resolution: payload?.resolution,\n    }, 'info');\n\n    const subscriberUID = payload?.subscriberUID;\n    if (!subscriberUID) return;\n    const subscription = this.realtimeSubscriptions.get(subscriberUID);\n    if (!subscription) return;\n\n    const cacheKey = this.getCacheKey(subscription.symbol, subscription.resolution);\n    if (cacheKey) {\n      this.lastBarsCache.delete(cacheKey);\n    }\n\n    if (typeof subscription.onResetCacheNeededCallback === 'function') {\n      try {\n        subscription.onResetCacheNeededCallback();\n      } catch (error) {\n        console.error(this._logPrefix, `Error invoking reset cache callback for ${subscriberUID}:`, error);\n      }\n    }\n\n    if (!this.realtimeSubscriptions.has(subscriberUID)) {\n      this.realtimeSubscriptions.set(subscriberUID, subscription);\n    }\n    this._syncedRealtimeSubscriptions.delete(subscriberUID);\n    this._syncDesiredState({\n      reason,\n      reconnect: true,\n      onlySubscriberUIDs: [subscriberUID],\n    });\n  }\n\n  _handlePong() {\n    this._lastPongAt = Date.now();\n    if (typeof this._lastPingSentAt === 'number' && this._lastPingSentAt > 0) {\n      this._lastPingRttMs = Math.max(0, this._lastPongAt - this._lastPingSentAt);\n    }\n    this._logDebugSnapshot('pong');\n  }\n\n  _forceRealtimeReconnect(reason) {\n    if (!this._ws) {\n      this._pendingFullReset = true;\n      this._pendingFullResetReason = reason || 'force_reconnect';\n      this._scheduleReconnect();\n      return;\n    }\n    console.warn(this._logPrefix, `Force realtime reconnect (${reason})`);\n    this._pendingFullReset = true;\n    this._pendingFullResetReason = reason || 'force_reconnect';\n    this._cleanupSocket();\n    this._scheduleReconnect();\n  }\n\n  _handleSystemWarning(payload) {\n    const { warningId, requiresAck, state, message, retry, finalAttempt } = payload;\n\n    if (finalAttempt) {\n      console.warn(this._logPrefix, 'System warning (final attempt):', message, { state, warningId });\n    } else if (retry) {\n      console.warn(this._logPrefix, `System warning (retry ${retry}):`, message, { state, warningId });\n    } else {\n      console.warn(this._logPrefix, 'System warning:', message, { state, warningId });\n    }\n\n    if (requiresAck && warningId) {\n      this._sendAck(warningId);\n    }\n\n    if (typeof this._onSystemWarning === 'function') {\n      this._onSystemWarning({ state, message, warningId });\n    }\n  }\n\n  _sendAck(warningId) {\n    if (this._ws && this._ws.readyState === WebSocket.OPEN) {\n      try {\n        this._ws.send(JSON.stringify({\n          type: 'ack_warning',\n          warningId,\n        }));\n        console.debug(this._logPrefix, 'Sent warning ACK:', warningId);\n      } catch (error) {\n        console.error(this._logPrefix, 'Failed to send warning ACK:', error);\n      }\n    }\n  }\n\n  _handleIncomingBar(payload) {\n    const { subscriberUID, bar } = payload;\n    if (!subscriberUID || !bar) return;\n    const subscription = this.realtimeSubscriptions.get(subscriberUID);\n    if (!subscription) return;\n\n    const formattedBar = formatRealtimeBar(bar);\n    const cacheKey = this.getCacheKey(subscription.symbol, subscription.resolution);\n\n    const lastBar = this.lastBarsCache.get(cacheKey);\n    if (lastBar && typeof lastBar.time === 'number') {\n      if (formattedBar.time < lastBar.time) {\n        console.debug(this._logPrefix, 'Ignoring outdated bar update', {\n          subscriberUID,\n          receivedTime: formattedBar.time,\n          cachedTime: lastBar.time,\n        });\n        return;\n      }\n      if (formattedBar.time === lastBar.time) {\n        if (floatEquals(formattedBar.open, lastBar.open) &&\n            floatEquals(formattedBar.high, lastBar.high) &&\n            floatEquals(formattedBar.low, lastBar.low) &&\n            floatEquals(formattedBar.close, lastBar.close) &&\n            floatEquals(formattedBar.volume, lastBar.volume)) {\n          return;\n        }\n      }\n    }\n\n    this.setLastBarCache(cacheKey, formattedBar);\n\n    if (typeof subscription.onRealtimeCallback === 'function') {\n      subscription.onRealtimeCallback(formattedBar);\n    }\n\n    if (this._broker && typeof this._broker.updateQuotes === 'function' && formattedBar.close) {\n      this._broker.updateQuotes(subscription.symbol, {\n        bid: formattedBar.close,\n        ask: formattedBar.close,\n        lp: formattedBar.close,\n      });\n    }\n  }\n\n  _handleIncomingQuote(payload) {\n    const { listenerGUID, quotes } = payload;\n    if (!listenerGUID || !Array.isArray(quotes)) return;\n    const subscription = this.quoteSubscriptions.get(listenerGUID);\n    if (!subscription || typeof subscription.callback !== 'function') return;\n    try {\n      subscription.callback(quotes);\n\n      if (this._broker && typeof this._broker.updateQuotes === 'function') {\n        for (const quote of quotes) {\n          if (quote.n && (quote.v?.bid !== undefined || quote.v?.ask !== undefined || quote.v?.lp !== undefined)) {\n            this._broker.updateQuotes(quote.n, {\n              bid: quote.v?.bid,\n              ask: quote.v?.ask,\n              lp: quote.v?.lp,\n            });\n          }\n        }\n      }\n    } catch (error) {\n      console.error(this._logPrefix, 'quote callback error', error);\n    }\n  }\n\n  _sendRealtimeMessage(message) {\n    if (!message) return;\n    const serialized = JSON.stringify(message);\n    const isSubscriptionMessage = SUBSCRIPTION_MESSAGE_TYPES.has(message.type);\n    if (this._wsReady && this._ws && this._ws.readyState === WebSocket.OPEN) {\n      this._ws.send(serialized);\n      if (isSubscriptionMessage) {\n        this._trackSyncedSubscription(message);\n      }\n      return;\n    }\n\n    if (isSubscriptionMessage) {\n      return;\n    }\n\n    const currentPriority = MESSAGE_PRIORITY[message.type] || MESSAGE_PRIORITY.default;\n\n    if (this._wsQueue.length >= MAX_WS_QUEUE_SIZE) {\n      let lowestPriorityIndex = -1;\n      let lowestPriority = currentPriority;\n\n      for (let i = 0; i < this._wsQueue.length; i++) {\n        const queuedItem = this._wsQueue[i];\n        try {\n          const parsed = JSON.parse(queuedItem.data || queuedItem);\n          const itemPriority = MESSAGE_PRIORITY[parsed.type] || MESSAGE_PRIORITY.default;\n          if (itemPriority < lowestPriority) {\n            lowestPriority = itemPriority;\n            lowestPriorityIndex = i;\n          }\n        } catch (e) {\n          lowestPriorityIndex = i;\n          lowestPriority = 0;\n          break;\n        }\n      }\n\n      if (lowestPriorityIndex >= 0) {\n        this._wsQueue.splice(lowestPriorityIndex, 1);\n        console.warn(this._logPrefix, `Message queue overflow, discarded lower priority message (priority ${lowestPriority})`);\n      } else {\n        if (currentPriority >= 3) {\n          for (let i = 0; i < this._wsQueue.length; i++) {\n            try {\n              const parsed = JSON.parse(this._wsQueue[i].data || this._wsQueue[i]);\n              const itemPriority = MESSAGE_PRIORITY[parsed.type] || MESSAGE_PRIORITY.default;\n              if (itemPriority < 3) {\n                this._wsQueue.splice(i, 1);\n                console.warn(this._logPrefix, 'High priority message forcing out lower priority message');\n                break;\n              }\n            } catch (e) {\n              this._wsQueue.splice(i, 1);\n              break;\n            }\n          }\n        } else {\n          console.warn(this._logPrefix, `Message queue full, dropping current message (type: ${message.type}, priority ${currentPriority})`);\n          return;\n        }\n      }\n    }\n\n    this._wsQueue.push({\n      data: serialized,\n      priority: currentPriority,\n      timestamp: Date.now(),\n    });\n    this._ensureRealtimeSocket();\n  }\n\n  _flushRealtimeQueue() {\n    if (!this._wsReady || !this._ws) return;\n\n    while (this._wsQueue.length) {\n      const item = this._wsQueue.shift();\n      const payload = typeof item === 'object' && item.data ? item.data : item;\n      try {\n        this._ws.send(payload);\n      } catch (error) {\n        console.error(this._logPrefix, 'Failed to send realtime payload', error);\n        break;\n      }\n    }\n  }\n\n  _resubscribeAll(options = {}) {\n    const fullReset = options.fullReset === true;\n    const resetReason = fullReset ? (options.reason || 'reconnect') : null;\n    console.info(this._logPrefix, 'Resubscribing all after reconnect...');\n\n    this._resubscribeInProgress = true;\n\n    try {\n      if (fullReset) {\n        this._notifyFullReset({\n          reason: resetReason,\n          timestamp: Date.now(),\n        });\n      }\n\n      const barsSnapshot = new Map(this.realtimeSubscriptions);\n      const quotesSnapshot = new Map(this.quoteSubscriptions);\n\n      console.debug(this._logPrefix, `Saved subscriptions snapshot: ${barsSnapshot.size} bars, ${quotesSnapshot.size} quotes`);\n\n      if (fullReset) {\n        const previousSize = this.lastBarsCache.size;\n        this.lastBarsCache.clear();\n        this._quoteSubscribePending.clear();\n        if (previousSize > 0) {\n          console.info(this._logPrefix, `Cleared ${previousSize} cached bars due to full reset`);\n        }\n      } else {\n        let clearedCount = 0;\n        const activeKeys = new Set();\n\n        barsSnapshot.forEach((subscription) => {\n          const cacheKey = this.getCacheKey(subscription.symbol, subscription.resolution);\n          activeKeys.add(cacheKey);\n        });\n\n        activeKeys.forEach((key) => {\n          if (this.lastBarsCache.has(key)) {\n            this.lastBarsCache.delete(key);\n            clearedCount++;\n          }\n        });\n\n        if (clearedCount > 0) {\n          console.info(this._logPrefix, `Cleared ${clearedCount} active subscription caches, retained ${this.lastBarsCache.size} inactive caches`);\n        }\n      }\n\n      barsSnapshot.forEach((subscription, subscriberUID) => {\n        if (typeof subscription.onResetCacheNeededCallback === 'function') {\n          try {\n            subscription.onResetCacheNeededCallback();\n            console.debug(this._logPrefix, `Reset cache callback invoked for ${subscriberUID}`);\n          } catch (error) {\n            console.error(this._logPrefix, `Error invoking reset cache callback for ${subscriberUID}:`, error);\n          }\n        }\n\n        if (!this.realtimeSubscriptions.has(subscriberUID)) {\n          console.debug(this._logPrefix, `Re-adding subscription for ${subscriberUID} (was removed by resetCacheCallback)`);\n          this.realtimeSubscriptions.set(subscriberUID, subscription);\n        }\n      });\n\n      quotesSnapshot.forEach((subscription, listenerGUID) => {\n        if (!this.quoteSubscriptions.has(listenerGUID)) {\n          console.debug(this._logPrefix, `Re-adding quote subscription for ${listenerGUID}`);\n          this.quoteSubscriptions.set(listenerGUID, subscription);\n        }\n      });\n\n      this._clearSyncedState();\n      this._syncDesiredState({\n        barsSnapshot,\n        quotesSnapshot,\n        reason: resetReason,\n        reconnect: true,\n      });\n\n      console.info(this._logPrefix, `Resubscribed ${barsSnapshot.size} bars and ${quotesSnapshot.size} quotes`);\n\n    } finally {\n      this._resubscribeInProgress = false;\n\n      if (this.realtimeSubscriptions.size === 0 && this.quoteSubscriptions.size === 0) {\n        console.info(this._logPrefix, 'No active subscriptions after resubscribe, cleaning up socket');\n        this._cleanupSocket();\n      }\n    }\n  }\n\n  _syncDesiredState({ barsSnapshot, quotesSnapshot, reconnect = false, reason = null, onlySubscriberUIDs = null } = {}) {\n    const barsSource = barsSnapshot || this.realtimeSubscriptions;\n    const quotesSource = quotesSnapshot || this.quoteSubscriptions;\n    const onlySubscriberSet = Array.isArray(onlySubscriberUIDs) ? new Set(onlySubscriberUIDs) : null;\n\n    barsSource.forEach((subscription, subscriberUID) => {\n      if (onlySubscriberSet && !onlySubscriberSet.has(subscriberUID)) return;\n      const signature = this._getRealtimeSubscriptionSignature(subscription);\n      const previousSignature = this._syncedRealtimeSubscriptions.get(subscriberUID);\n      if (reconnect || signature !== previousSignature) {\n        this._sendRealtimeMessage({\n          type: 'subscribe',\n          symbol: subscription.symbol,\n          resolution: subscription.resolution,\n          session: subscription.session,\n          subscriberUID,\n          reason,\n        });\n      }\n    });\n\n    quotesSource.forEach((subscription, listenerGUID) => {\n      const signature = this._getQuoteSubscriptionSignature(subscription);\n      const previousSignature = this._syncedQuoteSubscriptions.get(listenerGUID);\n      if (reconnect || signature !== previousSignature) {\n        this._sendRealtimeMessage({\n          type: 'subscribe_quotes',\n          listenerGUID,\n          symbols: Array.from(subscription.symbols),\n          fastSymbols: Array.from(subscription.fastSymbols),\n          reason,\n        });\n      }\n    });\n  }\n\n  _scheduleReconnect() {\n    if (this._wsReconnectTimer || (!this.realtimeSubscriptions.size && !this.quoteSubscriptions.size)) return;\n    if (this._isOffline || (typeof navigator !== 'undefined' && navigator.onLine === false)) return;\n\n    if (this._wsReconnectAttempts >= MAX_RECONNECT_ATTEMPTS) {\n      console.error(this._logPrefix, `Max reconnect attempts (${MAX_RECONNECT_ATTEMPTS}) reached, giving up`);\n      return;\n    }\n\n    const delay = Math.min(\n      REALTIME_RECONNECT_BASE_DELAY_MS * Math.pow(REALTIME_RECONNECT_BACKOFF_FACTOR, this._wsReconnectAttempts),\n      REALTIME_RECONNECT_MAX_DELAY_MS\n    );\n\n    this._wsReconnectAttempts++;\n    console.info(this._logPrefix, `Scheduling reconnect attempt ${this._wsReconnectAttempts}/${MAX_RECONNECT_ATTEMPTS} in ${Math.round(delay)}ms`);\n\n    this._wsReconnectTimer = setTimeout(() => {\n      this._wsReconnectTimer = null;\n      if (this.realtimeSubscriptions.size || this.quoteSubscriptions.size) {\n        console.info(this._logPrefix, 'Attempting realtime reconnect...');\n        this._ensureRealtimeSocket();\n      }\n    }, delay);\n  }\n\n  _cleanupSocket() {\n    this._stopHeartbeat();\n    if (this._ws) {\n      try {\n        this._wsClosingIntentionally = true;\n        this._ws.close();\n      } catch (error) {\n        console.error(this._logPrefix, 'Failed to close realtime socket', error);\n        this._wsClosingIntentionally = false;\n      }\n    }\n    this._ws = null;\n    this._wsReady = false;\n    if (this._wsReconnectTimer) {\n      clearTimeout(this._wsReconnectTimer);\n      this._wsReconnectTimer = null;\n    }\n    this._wsQueue = [];\n    this._wsReconnectAttempts = 0;\n    this._clearSyncedState();\n  }\n\n  _startHeartbeat() {\n    if (this._heartbeatTimer) return;\n    this._lastPongAt = Date.now();\n\n    this._heartbeatTimer = setInterval(() => {\n      const now = Date.now();\n\n      if (this._wsReady && now - this._lastPongAt > CLIENT_PONG_TIMEOUT_MS) {\n        console.warn(this._logPrefix, 'Realtime pong timeout, reconnecting', {\n          lastPongDelta: now - this._lastPongAt,\n          threshold: CLIENT_PONG_TIMEOUT_MS,\n        });\n        this._forceRealtimeReconnect('pong_timeout');\n        return;\n      }\n\n      this._lastPingSentAt = now;\n      this._sendRealtimeMessage({ type: 'ping', timestamp: now });\n    }, HEARTBEAT_INTERVAL_MS);\n  }\n\n  _stopHeartbeat() {\n    if (this._heartbeatTimer) {\n      clearInterval(this._heartbeatTimer);\n      this._heartbeatTimer = null;\n    }\n  }\n\n  destroy() {\n    console.info(this._logPrefix, 'Destroying realtime client');\n    this._cleanupSocket();\n    this.realtimeSubscriptions.clear();\n    this.quoteSubscriptions.clear();\n    this.lastBarsCache.clear();\n    this._quoteSubscribePending.clear();\n    this._connectionStateListeners.clear();\n    this._fullResetListeners.clear();\n    this._setConnectionState(ConnectionState.DISCONNECTED, { reason: 'instance_destroyed' });\n  }\n}\n\nexport { ConnectionState, RealtimeClient };\n", "/**\n * \u7B80\u6613\u8BF7\u6C42\u53BB\u91CD\u5668\n * \u9632\u6B62\u77ED\u65F6\u95F4\u5185\u5BF9\u540C\u4E00\u8D44\u6E90\u53D1\u8D77\u91CD\u590D\u8BF7\u6C42\n */\nclass RequestDeduplicator {\n  constructor() {\n    this._pending = new Map();\n  }\n\n  /**\n   * \u53BB\u91CD\u6267\u884C\u5F02\u6B65\u51FD\u6570\n   * @param {string} key - \u8BF7\u6C42\u552F\u4E00\u6807\u8BC6\n   * @param {Function} fn - \u5F02\u6B65\u51FD\u6570\n   * @returns {Promise}\n   */\n  async dedupe(key, fn) {\n    if (this._pending.has(key)) {\n      return this._pending.get(key);\n    }\n\n    const promise = fn().finally(() => {\n      this._pending.delete(key);\n    });\n\n    this._pending.set(key, promise);\n    return promise;\n  }\n\n  /**\n   * \u53D6\u6D88\u6307\u5B9A\u8BF7\u6C42\n   */\n  cancel(key) {\n    this._pending.delete(key);\n  }\n\n  /**\n   * \u6E05\u7A7A\u6240\u6709\u5F85\u5904\u7406\u8BF7\u6C42\n   */\n  clear() {\n    this._pending.clear();\n  }\n\n  /**\n   * \u83B7\u53D6\u5F85\u5904\u7406\u8BF7\u6C42\u6570\u91CF\n   */\n  get size() {\n    return this._pending.size;\n  }\n}\n\n/**\n * @param {Error} error\n * @param {{ status?: number } | null} [response]\n * @param {number[]} [retryableStatusCodes]\n * @returns {boolean}\n */\nfunction isRetryableError(error, response = null, retryableStatusCodes = []) {\n  if (!error) return false;\n\n  if (response && retryableStatusCodes.includes(response.status)) {\n    return true;\n  }\n\n  const retryableErrors = ['NetworkError', 'TypeError', 'AbortError'];\n  return retryableErrors.includes(error.name);\n}\n\n/**\n * @param {number} attempt\n * @param {number} [baseDelay]\n * @param {number} [maxDelay]\n * @param {number} [backoffFactor]\n * @returns {number}\n */\nfunction getRetryDelay(attempt, baseDelay = 500, maxDelay = 5000, backoffFactor = 2) {\n  const delay = baseDelay * Math.pow(backoffFactor, attempt);\n  return Math.min(delay, maxDelay);\n}\n\n/**\n * @param {number} ms\n * @returns {Promise<void>}\n */\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n/**\n * @param {Record<string, unknown>} params\n * @returns {string}\n */\nfunction buildQuery(params) {\n  if (!params || typeof params !== 'object') return '';\n  return Object.entries(params)\n    .map(([key, value]) => {\n      if (value === undefined || value === null) return null;\n      return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n    })\n    .filter(Boolean)\n    .join('&');\n}\n\nclass UdfHttpClient {\n  constructor({ baseUrl, logPrefix = '[UdfHttpClient]', retryConfig = {} } = {}) {\n    this._baseUrl = (baseUrl || '').replace(/\\/$/, '');\n    this._logPrefix = logPrefix;\n    this._deduplicator = new RequestDeduplicator();\n    this._retryConfig = {\n      maxAttempts: retryConfig.maxAttempts || 3,\n      baseDelay: retryConfig.baseDelay || 500,\n      maxDelay: retryConfig.maxDelay || 5000,\n      backoffFactor: retryConfig.backoffFactor || 2,\n      retryableStatusCodes: retryConfig.retryableStatusCodes || [502, 503, 504, 429],\n    };\n    this._stats = {\n      totalRequests: 0,\n      successfulRequests: 0,\n      failedRequests: 0,\n      retriedRequests: 0,\n      lastRequestTime: null,\n    };\n  }\n\n  /**\n   * \u83B7\u53D6\u8BF7\u6C42\u7EDF\u8BA1\n   */\n  getStats() {\n    return { ...this._stats };\n  }\n\n  /**\n   * \u6E05\u7406\u53BB\u91CD\u5668\n   */\n  clear() {\n    this._deduplicator.clear();\n  }\n\n  /**\n   * \u53D1\u8D77 HTTP \u8BF7\u6C42\uFF08\u5E26\u91CD\u8BD5\u548C\u53BB\u91CD\uFF09\n   * @param {string} endpoint - API \u7AEF\u70B9\n   * @param {Object} params - \u67E5\u8BE2\u53C2\u6570\n   * @param {Object} options - \u9009\u9879\n   * @param {number} options.timeout - \u8D85\u65F6\u65F6\u95F4 (ms)\n   * @param {boolean} options.retry - \u662F\u5426\u542F\u7528\u91CD\u8BD5 (\u9ED8\u8BA4 true)\n   * @param {boolean} options.dedupe - \u662F\u5426\u542F\u7528\u53BB\u91CD (\u9ED8\u8BA4 true)\n   * @param {string} options.responseType - \u54CD\u5E94\u7C7B\u578B ('json' | 'text')\n   */\n  async request(endpoint, params = {}, options = {}) {\n    const queryString = buildQuery(params);\n    const url = queryString\n      ? `${this._baseUrl}${endpoint}?${queryString}`\n      : `${this._baseUrl}${endpoint}`;\n\n    const timeoutMs = options.timeout || 10000;\n    const enableDedupe = options.dedupe !== false;\n    const method = options.method || 'GET';\n    const dedupeKey = `${method}:${url}`;\n    const enableRetry = options.retry !== false;\n    const maxAttempts = enableRetry ? this._retryConfig.maxAttempts : 1;\n    const retryConfig = this._retryConfig;\n    const stats = this._stats;\n    const logPrefix = this._logPrefix;\n\n    stats.totalRequests++;\n    stats.lastRequestTime = Date.now();\n\n    function shouldRetry(error, response, attempt) {\n      if (!enableRetry) return false;\n      if (attempt >= maxAttempts - 1) return false;\n      return isRetryableError(error, response, retryConfig.retryableStatusCodes);\n    }\n\n    async function doRequest() {\n      let lastError = null;\n      let response = null;\n\n      for (let attempt = 0; attempt < maxAttempts; attempt++) {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), timeoutMs);\n\n        try {\n          if (attempt > 0) {\n            const delay = getRetryDelay(attempt - 1, retryConfig.baseDelay, retryConfig.maxDelay, retryConfig.backoffFactor);\n            console.info(logPrefix, `Retry ${attempt}/${maxAttempts - 1} after ${delay}ms for ${endpoint}`);\n            stats.retriedRequests++;\n            await sleep(delay);\n          }\n\n          console.debug(logPrefix, 'Requesting:', url, attempt > 0 ? `(attempt ${attempt + 1})` : '');\n\n          response = await fetch(url, {\n            signal: controller.signal,\n            ...options.fetchOptions,\n          });\n\n          clearTimeout(timeoutId);\n\n          if (!response.ok) {\n            const error = new Error(`HTTP ${response.status} for ${url}`);\n            error.status = response.status;\n\n            if (shouldRetry(error, response, attempt)) {\n              lastError = error;\n              continue;\n            }\n\n            console.error(logPrefix, 'Request failed:', error);\n            stats.failedRequests++;\n            throw error;\n          }\n\n          const payload = options.responseType === 'text'\n            ? await response.text()\n            : await response.json();\n\n          console.debug(logPrefix, 'Response:', typeof payload === 'object' ? '[object]' : payload);\n          stats.successfulRequests++;\n          return payload;\n\n        } catch (error) {\n          if (error?.name === 'AbortError') {\n            lastError = new Error(`Request timeout after ${timeoutMs}ms for ${endpoint}`);\n            lastError.name = 'AbortError';\n\n            if (shouldRetry(lastError, response, attempt)) {\n              console.warn(logPrefix, `Request timeout, will retry (${attempt + 1}/${maxAttempts})`);\n              continue;\n            }\n          } else {\n            lastError = error;\n\n            if (shouldRetry(lastError, response, attempt)) {\n              continue;\n            }\n          }\n\n          console.error(logPrefix, lastError.message);\n          stats.failedRequests++;\n          throw lastError;\n        } finally {\n          clearTimeout(timeoutId);\n        }\n      }\n\n      stats.failedRequests++;\n      throw lastError;\n    }\n\n    if (enableDedupe) {\n      return this._deduplicator.dedupe(dedupeKey, doRequest);\n    }\n\n    return doRequest();\n  }\n}\n\nexport { UdfHttpClient, RequestDeduplicator };\n", "import { normalizeQuoteEntry, normalizeQuoteList, safeNumber } from './datafeed-utils.js';\nimport { ConnectionState, RealtimeClient } from './realtime-client.js';\nimport { RequestDeduplicator, UdfHttpClient } from './udf-http-client.js';\n\n/**\n * @returns {string}\n */\nfunction getDefaultApiBaseUrl() {\n  if (window.__API_BASE_URL__) return window.__API_BASE_URL__;\n  const hostname = window.location.hostname;\n  const isLocalhost = hostname === 'localhost' || hostname === '127.0.0.1' || hostname === '0.0.0.0';\n  if (isLocalhost) {\n    return `http://${hostname}:3001`;\n  }\n  return window.location.origin;\n}\n\nconst API_BASE_URL = getDefaultApiBaseUrl();\n\nconst TIMEOUTS = {\n  config: 5000,\n  resolveSymbol: 15000,\n  getBars: 30000,\n  quotes: 10000,\n  search: 10000,\n  serverTime: 3000,\n  timescaleMarks: 5000,\n  default: 10000,\n};\n\nconst RETRY_CONFIG = {\n  maxAttempts: 3,\n  baseDelay: 500,\n  maxDelay: 5000,\n  backoffFactor: 2,\n  retryableErrors: ['NetworkError', 'TypeError', 'AbortError'],\n  retryableStatusCodes: [502, 503, 504, 429],\n};\n\nconst DEFAULT_CONFIGURATION = {\n  supported_resolutions: ['1', '5', '15', '30', '60', '120', '240', '1D'],\n  supports_search: true,\n  supports_group_request: false,\n  supports_marks: false,\n  supports_timescale_marks: true,\n  supports_time: true,\n  symbols_grouping: {\n    futures: /^([A-Z0-9]{1,5}?)([FGHJKMNQUVXZ](?:\\d{1,4})|\\d!?)$/,\n  },\n};\n\nconst OFFLINE_PLACEHOLDER_SYMBOL = 'OFFLINE:OFFLINE';\nconst logPrefix = '[TradingViewDatafeed]';\n\n/**\n * @returns {Object}\n */\nfunction buildOfflineSymbolInfo() {\n  return {\n    name: OFFLINE_PLACEHOLDER_SYMBOL,\n    ticker: OFFLINE_PLACEHOLDER_SYMBOL,\n    description: 'Offline placeholder symbol',\n    type: 'stock',\n    exchange: 'OFFLINE',\n    session: '24x7',\n    timezone: 'Etc/UTC',\n    minmov: 1,\n    minmov2: 0,\n    pointvalue: 1,\n    pricescale: 100,\n    has_intraday: true,\n    has_daily: true,\n    has_weekly_and_monthly: true,\n    supported_resolutions: DEFAULT_CONFIGURATION.supported_resolutions,\n    visible_plots_set: 'c',\n    format: 'price',\n  };\n}\n\n/**\n * @param {unknown} symbols\n * @returns {Array<string | { symbol: string, session?: string }>}\n */\nfunction buildQuoteRequestPayload(symbols) {\n  if (!Array.isArray(symbols)) return [];\n  return symbols\n    .map((entry) => {\n      if (typeof entry === 'string') {\n        const symbol = entry.trim();\n        return symbol.length ? symbol : null;\n      }\n      if (entry && typeof entry === 'object') {\n        const symbolName = normalizeQuoteEntry(entry);\n        if (!symbolName) return null;\n        const payload = { symbol: symbolName };\n        if (typeof entry.session === 'string' && entry.session.trim().length) {\n          payload.session = entry.session.trim();\n        }\n        return payload;\n      }\n      return null;\n    })\n    .filter(Boolean);\n}\n\nclass TradingViewDatafeed {\n  constructor(baseUrl = API_BASE_URL) {\n    this.baseUrl = baseUrl.replace(/\\/$/, '');\n    this.configuration = null;\n    this._configPromise = null;\n    this._broker = null;\n    this._resolveErrorListeners = new Set();\n    this._pendingSymbolForResolve = null;\n\n    this._timescaleMarksCache = new Map();\n    this._timescaleMarksCacheTTL = 5 * 60 * 1000;\n\n    this._http = new UdfHttpClient({\n      baseUrl: this.baseUrl,\n      logPrefix,\n      retryConfig: RETRY_CONFIG,\n    });\n\n    this._realtime = new RealtimeClient({\n      baseUrl: this.baseUrl,\n      logPrefix,\n      fetchQuotes: this.getQuotes.bind(this),\n    });\n    this._realtime.setSystemWarningHandler((payload) => {\n      if (typeof this._onSystemWarning === 'function') {\n        this._onSystemWarning(payload);\n      }\n    });\n\n    // Backward-compatible references\n    this.lastBarsCache = this._realtime.lastBarsCache;\n    this.realtimeSubscriptions = this._realtime.realtimeSubscriptions;\n    this.quoteSubscriptions = this._realtime.quoteSubscriptions;\n\n    this._onlineListener = this._handleOnline.bind(this);\n    this._offlineListener = this._handleOffline.bind(this);\n    if (typeof window !== 'undefined' && window.addEventListener) {\n      window.addEventListener('online', this._onlineListener);\n      window.addEventListener('offline', this._offlineListener);\n    }\n\n    console.info(logPrefix, 'Initialized with baseUrl:', this.baseUrl);\n  }\n\n  get connectionState() {\n    return this._realtime.connectionState;\n  }\n\n  onConnectionStateChange(listener) {\n    return this._realtime.onConnectionStateChange(listener);\n  }\n\n  onFullReset(listener) {\n    return this._realtime.onFullReset(listener);\n  }\n\n  onResolveError(listener) {\n    this._resolveErrorListeners.add(listener);\n    return () => this._resolveErrorListeners.delete(listener);\n  }\n\n  _notifyResolveError(info = {}) {\n    for (const listener of this._resolveErrorListeners) {\n      try {\n        listener(info);\n      } catch (error) {\n        console.error(logPrefix, 'Resolve error listener error:', error);\n      }\n    }\n  }\n\n  _handleOffline() {\n    this._realtime.handleOffline();\n  }\n\n  _handleOnline() {\n    this._realtime.handleOnline();\n  }\n\n  getStats() {\n    return this._http.getStats();\n  }\n\n  setBroker(broker) {\n    this._broker = broker;\n    this._realtime.setBroker(broker);\n    console.info(logPrefix, 'Broker instance set');\n  }\n\n  async _request(endpoint, params = {}, options = {}) {\n    return this._http.request(endpoint, params, options);\n  }\n\n  onReady(callback) {\n    console.info(logPrefix, 'onReady triggered');\n    this._ensureConfiguration()\n      .then((config) => {\n        setTimeout(() => callback(config), 0);\n      })\n      .catch((error) => {\n        console.error(logPrefix, 'Failed to load configuration, fallback to defaults', error);\n        const fallback = { ...DEFAULT_CONFIGURATION };\n        this.configuration = fallback;\n        setTimeout(() => callback(fallback), 0);\n      });\n  }\n\n  async _ensureConfiguration() {\n    if (this.configuration) return this.configuration;\n    if (!this._configPromise) {\n      this._configPromise = this._request('/api/datafeed/config', {}, {\n        timeout: TIMEOUTS.config,\n        retry: true,\n      })\n        .then((config) => {\n          const normalized = { ...DEFAULT_CONFIGURATION, ...(config || {}) };\n          this.configuration = normalized;\n          this._configPromise = null;\n          return normalized;\n        })\n        .catch((error) => {\n          this._configPromise = null;\n          throw error;\n        });\n    }\n    return this._configPromise;\n  }\n\n  async searchSymbols(userInput, exchange, symbolType, onResultReadyCallback) {\n    console.info(logPrefix, 'searchSymbols', { userInput, exchange, symbolType });\n    try {\n      const data = await this._request('/api/datafeed/search', {\n        query: userInput || '',\n        exchange: exchange || '',\n        type: symbolType || '',\n      }, {\n        timeout: TIMEOUTS.search,\n        retry: true,\n      });\n      const results = Array.isArray(data) ? data : [];\n      console.info(logPrefix, 'searchSymbols results:', results.length);\n      onResultReadyCallback(results);\n    } catch (error) {\n      console.error(logPrefix, 'searchSymbols failed:', error);\n      onResultReadyCallback([]);\n    }\n  }\n\n  async searchSymbolsFull(userInput = '', symbolType = '', offset = 0) {\n    try {\n      const payload = await this._request('/api/datafeed/search/full', {\n        query: userInput,\n        type: symbolType,\n        offset,\n      }, {\n        timeout: TIMEOUTS.search,\n        retry: true,\n      });\n      if (payload && typeof payload === 'object' && Array.isArray(payload.symbols)) {\n        return payload;\n      }\n      if (Array.isArray(payload)) {\n        return { symbols_remaining: 0, symbols: payload };\n      }\n      return { symbols_remaining: 0, symbols: [] };\n    } catch (error) {\n      console.error(logPrefix, 'searchSymbolsFull failed:', error);\n      return { symbols_remaining: 0, symbols: [] };\n    }\n  }\n\n  async resolveSymbol(symbolName, onSymbolResolvedCallback, onResolveErrorCallback, extension) {\n    const sessionType = extension?.session;\n    console.info(logPrefix, 'resolveSymbol', symbolName, 'session:', sessionType || 'default');\n    try {\n      const normalizedSymbol = typeof symbolName === 'string' ? symbolName.trim() : '';\n      const isOffline = this._realtime.isOffline || (typeof navigator !== 'undefined' && navigator.onLine === false);\n\n      if (normalizedSymbol === OFFLINE_PLACEHOLDER_SYMBOL) {\n        onSymbolResolvedCallback(buildOfflineSymbolInfo());\n        return;\n      }\n\n      if (isOffline) {\n        this._pendingSymbolForResolve = normalizedSymbol || symbolName;\n        this._notifyResolveError({\n          symbol: normalizedSymbol || symbolName,\n          error: new Error('offline'),\n          isOffline: true,\n          status: null,\n          code: 'offline',\n        });\n        if (typeof onResolveErrorCallback === 'function') {\n          onResolveErrorCallback('offline');\n        }\n        return;\n      }\n\n      const params = { symbol: symbolName };\n      if (sessionType) {\n        params.session = sessionType;\n      }\n      const data = await this._request('/api/datafeed/symbols', params, {\n        timeout: TIMEOUTS.resolveSymbol,\n        retry: true,\n        dedupe: true,\n      });\n      if (!data || data.s === 'error') {\n        throw new Error(data?.errmsg || 'Symbol not found');\n      }\n      console.info(logPrefix, 'resolveSymbol success');\n\n      if (this._broker && typeof this._broker.setSymbolInfo === 'function') {\n        this._broker.setSymbolInfo(symbolName, data);\n        console.info(logPrefix, 'Symbol info passed to broker, pointvalue:', data.pointvalue);\n      }\n\n      onSymbolResolvedCallback(data);\n    } catch (error) {\n      console.error(logPrefix, 'resolveSymbol failed:', error);\n      const isOffline = this._realtime.isOffline || (typeof navigator !== 'undefined' && navigator.onLine === false);\n      if (isOffline || error?.status === 503) {\n        this._pendingSymbolForResolve = symbolName;\n      }\n      this._notifyResolveError({\n        symbol: symbolName,\n        error,\n        isOffline,\n        status: error?.status,\n        code: error?.code || 'resolve_error',\n        name: error?.name,\n      });\n      if (typeof onResolveErrorCallback === 'function') {\n        onResolveErrorCallback(error?.message || 'resolve_error');\n      }\n    }\n  }\n\n  getServerTime(callback) {\n    console.info(logPrefix, 'getServerTime');\n    this._request('/api/datafeed/time', {}, {\n      responseType: 'text',\n      timeout: TIMEOUTS.serverTime,\n      retry: false,\n      dedupe: false,\n    })\n      .then((data) => {\n        const serverTime = parseInt(data, 10);\n        if (Number.isFinite(serverTime) && serverTime > 0) {\n          callback(serverTime);\n        } else {\n          callback(Math.floor(Date.now() / 1000));\n        }\n      })\n      .catch((error) => {\n        console.warn(logPrefix, 'getServerTime failed, using local time', error);\n        callback(Math.floor(Date.now() / 1000));\n      });\n  }\n\n  resetCache() {\n    this._realtime.resetCache();\n    this._timescaleMarksCache?.clear();\n    this._http.clear();\n  }\n\n  consumePendingSymbol() {\n    const symbol = this._pendingSymbolForResolve;\n    this._pendingSymbolForResolve = null;\n    return symbol;\n  }\n\n  _convertToTopStepXSymbol(tvSymbol) {\n    if (!tvSymbol) return null;\n\n    let baseSymbol = tvSymbol;\n    if (tvSymbol.includes(':')) {\n      baseSymbol = tvSymbol.split(':')[1];\n    }\n    baseSymbol = baseSymbol.replace(/\\d+!?$/, '');\n    if (!baseSymbol) return null;\n    return '/' + baseSymbol;\n  }\n\n  async getTimescaleMarks(symbolInfo, from, to, onDataCallback, resolution) {\n    const tvSymbol = symbolInfo?.ticker || symbolInfo?.name;\n    const topStepXSymbol = this._convertToTopStepXSymbol(tvSymbol);\n    console.info(logPrefix, 'getTimescaleMarks', { tvSymbol, topStepXSymbol, from, to, resolution });\n\n    const token = localStorage.getItem('topstepx_token');\n    if (!token) {\n      console.debug(logPrefix, 'getTimescaleMarks: No TopStepX token, skipping');\n      onDataCallback([]);\n      return;\n    }\n\n    if (!topStepXSymbol) {\n      console.debug(logPrefix, 'getTimescaleMarks: Invalid symbol');\n      onDataCallback([]);\n      return;\n    }\n\n    const cacheKey = `${topStepXSymbol}_${resolution}_${from}_${to}`;\n    const cached = this._timescaleMarksCache.get(cacheKey);\n    if (cached && Date.now() - cached.timestamp < this._timescaleMarksCacheTTL) {\n      console.debug(logPrefix, 'getTimescaleMarks: Cache hit');\n      onDataCallback(cached.marks);\n      return;\n    }\n\n    try {\n      const marks = await this._request('/api/topstepx-chart/timescale_marks', {\n        symbol: topStepXSymbol,\n        from,\n        to,\n        resolution,\n      }, {\n        timeout: TIMEOUTS.timescaleMarks,\n        retry: false,\n        dedupe: false,\n        method: 'GET',\n        fetchOptions: {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        },\n      });\n\n      if (!Array.isArray(marks)) {\n        console.warn(logPrefix, 'getTimescaleMarks: Invalid response format');\n        onDataCallback([]);\n        return;\n      }\n\n      const formattedMarks = marks.map(mark => ({\n        id: mark.id,\n        time: mark.time,\n        color: mark.color || '#b5b5b5',\n        label: mark.label || '',\n        tooltip: Array.isArray(mark.tooltip) ? mark.tooltip : [],\n        imageUrl: mark.imageUrl,\n        showLabelWhenImageLoaded: mark.showLabelWhenImageLoaded || false,\n      }));\n\n      this._timescaleMarksCache.set(cacheKey, {\n        marks: formattedMarks,\n        timestamp: Date.now(),\n      });\n\n      if (this._timescaleMarksCache.size > 50) {\n        const oldestKey = this._timescaleMarksCache.keys().next().value;\n        this._timescaleMarksCache.delete(oldestKey);\n      }\n\n      console.info(logPrefix, `getTimescaleMarks: Returned ${formattedMarks.length} marks`);\n      onDataCallback(formattedMarks);\n\n    } catch (error) {\n      if (error?.status === 401 || error?.status === 403) {\n        console.warn(logPrefix, 'getTimescaleMarks: Token expired or invalid');\n        onDataCallback([]);\n        return;\n      }\n      console.error(logPrefix, 'getTimescaleMarks failed:', error);\n      onDataCallback([]);\n    }\n  }\n\n  async getBars(symbolInfo, resolution, periodParams, onHistoryCallback, onErrorCallback) {\n    const { from, to, firstDataRequest } = periodParams;\n    console.info(logPrefix, 'getBars', {\n      symbol: symbolInfo?.ticker || symbolInfo?.name,\n      resolution,\n      from,\n      to,\n      firstDataRequest,\n      session: symbolInfo?.subsession_id,\n    });\n\n    try {\n      const symbolName = symbolInfo?.ticker || symbolInfo?.name;\n      if (symbolName === OFFLINE_PLACEHOLDER_SYMBOL) {\n        onHistoryCallback([], { noData: true });\n        return;\n      }\n\n      const params = {\n        symbol: symbolInfo.ticker || symbolInfo.name,\n        resolution,\n        from,\n        to,\n      };\n      if (symbolInfo.subsession_id) {\n        params.session = symbolInfo.subsession_id;\n      }\n      const data = await this._request('/api/datafeed/history', params, {\n        timeout: TIMEOUTS.getBars,\n        retry: true,\n        dedupe: true,\n      });\n\n      if (data.s === 'no_data') {\n        console.warn(logPrefix, 'getBars no data');\n        onHistoryCallback([], { noData: true, nextTime: data.nextTime });\n        return;\n      }\n\n      if (data.s !== 'ok' || !Array.isArray(data.t)) {\n        throw new Error('Invalid history response');\n      }\n\n      const bars = data.t.map((time, index) => ({\n        time: safeNumber(time) * 1000,\n        open: safeNumber(data.o?.[index]),\n        high: safeNumber(data.h?.[index]),\n        low: safeNumber(data.l?.[index]),\n        close: safeNumber(data.c?.[index]),\n        volume: safeNumber(data.v?.[index]),\n      }));\n\n      console.info(logPrefix, `getBars returned ${bars.length} bars`);\n      if (bars.length) {\n        const lastBar = bars[bars.length - 1];\n        this._setLastBarCache(this._getCacheKey(symbolInfo, resolution), { ...lastBar });\n      }\n      onHistoryCallback(bars, { noData: bars.length === 0 });\n    } catch (error) {\n      console.error(logPrefix, 'getBars failed:', error);\n      if (typeof onErrorCallback === 'function') {\n        onErrorCallback(error);\n      }\n    }\n  }\n\n  async getQuotes(symbols, onDataCallback, onErrorCallback) {\n    const normalizedSymbols = normalizeQuoteList(symbols);\n    console.debug(logPrefix, 'getQuotes', normalizedSymbols);\n\n    if (!normalizedSymbols.length) {\n      onDataCallback([]);\n      return;\n    }\n\n    const body = {\n      symbols: buildQuoteRequestPayload(symbols),\n    };\n\n    try {\n      const payload = await this._request('/api/datafeed/quotes', {}, {\n        timeout: TIMEOUTS.quotes,\n        retry: true,\n        dedupe: false,\n        method: 'POST',\n        fetchOptions: {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(body),\n        },\n      });\n\n      const quotes = Array.isArray(payload) ? payload : [];\n      onDataCallback(quotes);\n    } catch (error) {\n      console.error(logPrefix, 'getQuotes failed', error?.message || error);\n      if (typeof onErrorCallback === 'function') {\n        onErrorCallback(error);\n      }\n    }\n  }\n\n  subscribeBars(symbolInfo, resolution, onRealtimeCallback, subscriberUID, onResetCacheNeededCallback) {\n    this._realtime.subscribeBars(\n      symbolInfo,\n      resolution,\n      onRealtimeCallback,\n      subscriberUID,\n      onResetCacheNeededCallback,\n    );\n  }\n\n  unsubscribeBars(subscriberUID) {\n    this._realtime.unsubscribeBars(subscriberUID);\n  }\n\n  subscribeQuotes(symbols, fastSymbols, onRealtimeCallback, listenerGUID) {\n    this._realtime.subscribeQuotes(symbols, fastSymbols, onRealtimeCallback, listenerGUID);\n  }\n\n  unsubscribeQuotes(listenerGUID) {\n    this._realtime.unsubscribeQuotes(listenerGUID);\n  }\n\n  _getCacheKey(symbolInfo, resolution) {\n    return this._realtime.getCacheKey(symbolInfo, resolution);\n  }\n\n  _setLastBarCache(key, bar) {\n    this._realtime.setLastBarCache(key, bar);\n  }\n\n  destroy() {\n    console.info(logPrefix, 'Destroying datafeed instance');\n\n    this._realtime.destroy();\n    this._http.clear();\n    this._timescaleMarksCache?.clear();\n    this.configuration = null;\n    this._configPromise = null;\n    this._resolveErrorListeners.clear();\n    this._pendingSymbolForResolve = null;\n\n    if (typeof window !== 'undefined' && window.removeEventListener) {\n      window.removeEventListener('online', this._onlineListener);\n      window.removeEventListener('offline', this._offlineListener);\n    }\n\n    console.info(logPrefix, 'Datafeed instance destroyed');\n  }\n}\n\nexport { ConnectionState, RequestDeduplicator };\nexport default TradingViewDatafeed;\n", "/**\n * Datafeed \u6E90\u7801\u5165\u53E3\uFF08\u540E\u7EED\u7531\u6784\u5EFA\u8F93\u51FA\u5230 public/datafeed.js\uFF09\n */\n\nimport TradingViewDatafeed from './tradingview-datafeed.js';\nexport default TradingViewDatafeed;\n\n\n"],
  "mappings": "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",
  "names": ["logPrefix", "existing", "logPrefix"]
}
